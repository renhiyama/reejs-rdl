import e from"./8e913a.js";export default{name:"info",description:"Get info from RDL",options:[{name:"bot",description:"Get info about bot",type:1,options:[{name:"id",description:"The bot's ID",type:6,required:!0}]},{name:"user",description:"Get info about user",type:1,options:[{name:"id",description:"The user's ID (default: you)",type:6}]}]};export async function run(t,o){let n=o.data.options[0].name,i=Object.keys(o.data.resolved.members)[0]||o.member.user.id;if("bot"==n){let t=(await e.query("SELECT * FROM bots WHERE botID = $id",{id:i}))[0].result[0];await fetch(`https://discord.com/api/v10/interactions/${o.id}/${o.token}/callback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bot ${Deno.env.get("DISCORD_TOKEN")}`},body:JSON.stringify({type:4,data:{content:"Searching..."}})});return t?await fetch(`https://discord.com/api/v10/webhooks/${Deno.env.get("DISCORD_CLIENT_ID")}/${o.token}/messages/@original`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bot ${Deno.env.get("DISCORD_TOKEN")}`},body:JSON.stringify({type:4,data:{embeds:[{title:t.tag,color:5793266,url:`https://dscrdly.com/b/${t.slug}`,thumbnail:{url:t.avatarURL},fields:[{name:"Prefix",value:t.prefix||"<Not Disclosed>",inline:!0},{name:"Servers",value:t.servers||"<Not Disclosed>",inline:!0},{name:"Owner",value:t.owners.map((e=>`<@!${e}>`)).join(", "),inline:!0},{name:"Library",value:t.lib||"<Not Disclosed>",inline:!0},{name:"Invite",value:`[Click Here for No-Perm Invite](https://discord.com/oauth2/authorize?client_id=${t.id}&scope=bot&permissions=0)\n[Click Here for Original Invite](${t.invite})`,inline:!0},{name:"Support Server",value:t.support?`https://discord.gg/${t.support}`:"<Not Disclosed>",inline:!0},{name:"Vote",value:`[Click Here to Vote - ${t.opted_coins?"Uses R$":"Based on Cooldown"}](https://discord.rovelstars.com/bots/${t.id}/vote)`,inline:!0}]}]}})}):await fetch(`https://discord.com/api/v10/webhooks/${Deno.env.get("DISCORD_CLIENT_ID")}/${o.token}/messages/@original`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bot ${Deno.env.get("DISCORD_TOKEN")}`},body:JSON.stringify({type:4,data:{content:"Bot not found"}})})}if("user"==n){console.log(Users);let e=await Users.findOne({id:i}),o=await Bots.find({owners:{$in:[i]}}),n=o.length?o.map((e=>e.tag)).join(", "):"No Bots";return console.log(e),console.log(o),e?t.json({type:4,data:{embeds:[{title:e.tag,description:e.bio,color:5793266,thumbnail:{url:e.avatarURL},fields:[{name:"Bots",value:n,inline:!0},{name:"Balance",value:`R$ ${e.coins}`,inline:!0},{name:"Recently Voted Bots",value:e.votes.length?e.votes.map((e=>`<@!${e}>`)).join(", "):"No Bots Voted Recently",inline:!0}]}]}}):t.json({type:4,data:{content:"User not found",flags:64}})}}