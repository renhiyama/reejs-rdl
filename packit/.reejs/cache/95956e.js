/* esm.sh - esbuild bundle(web-streams-polyfill@3.2.1/ponyfill) node production */
var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol("+e+")"};function pr(){}function fn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}var Vr=fn();function R(e){return typeof e=="object"&&e!==null||typeof e=="function"}var dt=pr,_r=Promise,sn=Promise.prototype.then,dn=Promise.resolve.bind(_r),cn=Promise.reject.bind(_r);function g(e){return new _r(e)}function m(e){return dn(e)}function f(e){return cn(e)}function z(e,r,t){return sn.call(e,r,t)}function W(e,r,t){z(z(e,r,t),void 0,dt)}function or(e,r){W(e,r)}function yr(e,r){W(e,void 0,r)}function J(e,r,t){return z(e,r,t)}function pe(e){z(e,void 0,dt)}var ke=function(){var e=Vr&&Vr.queueMicrotask;if(typeof e=="function")return e;var r=m(void 0);return function(t){return z(r,t)}}();function Ue(e,r,t){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,t)}function x(e,r,t){try{return m(Ue(e,r,t))}catch(n){return f(n)}}var Gr=16384,E=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(r){var t=this._back,n=t;t._elements.length===Gr-1&&(n={_elements:[],_next:void 0}),t._elements.push(r),n!==t&&(this._back=n,t._next=n),++this._size},e.prototype.shift=function(){var r=this._front,t=r,n=this._cursor,a=n+1,i=r._elements,o=i[n];return a===Gr&&(t=r._next,a=0),--this._size,this._cursor=a,r!==t&&(this._front=t),i[n]=void 0,o},e.prototype.forEach=function(r){for(var t=this._cursor,n=this._front,a=n._elements;(t!==a.length||n._next!==void 0)&&!(t===a.length&&(n=n._next,a=n._elements,t=0,a.length===0));)r(a[t]),++t},e.prototype.peek=function(){var r=this._front,t=this._cursor;return r._elements[t]},e}();function ct(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?Sr(e):r._state==="closed"?bn(e):bt(e,r._storedError)}function vr(e,r){var t=e._ownerReadableStream;return T(t,r)}function I(e){e._ownerReadableStream._state==="readable"?gr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):hn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ie(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Sr(e){e._closedPromise=g(function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t})}function bt(e,r){Sr(e),gr(e,r)}function bn(e){Sr(e),ht(e)}function gr(e,r){e._closedPromise_reject!==void 0&&(pe(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function hn(e,r){bt(e,r)}function ht(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var mt=b("[[AbortSteps]]"),pt=b("[[ErrorSteps]]"),Rr=b("[[CancelSteps]]"),wr=b("[[PullSteps]]"),$r=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},mn=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function pn(e){return typeof e=="object"||typeof e=="function"}function D(e,r){if(e!==void 0&&!pn(e))throw new TypeError(r+" is not an object.")}function q(e,r){if(typeof e!="function")throw new TypeError(r+" is not a function.")}function _n(e){return typeof e=="object"&&e!==null||typeof e=="function"}function _t(e,r){if(!_n(e))throw new TypeError(r+" is not an object.")}function F(e,r,t){if(e===void 0)throw new TypeError("Parameter "+r+" is required in '"+t+"'.")}function cr(e,r,t){if(e===void 0)throw new TypeError(r+" is required in '"+t+"'.")}function Cr(e){return Number(e)}function yt(e){return e===0?0:e}function yn(e){return yt(mn(e))}function vt(e,r){var t=0,n=Number.MAX_SAFE_INTEGER,a=Number(e);if(a=yt(a),!$r(a))throw new TypeError(r+" is not a finite number");if(a=yn(a),a<t||a>n)throw new TypeError(r+" is outside the accepted range of "+t+" to "+n+", inclusive");return!$r(a)||a===0?0:a}function Pr(e,r){if(!N(e))throw new TypeError(r+" is not a ReadableStream.")}function oe(e){return new He(e)}function St(e,r){e._reader._readRequests.push(r)}function Tr(e,r,t){var n=e._reader,a=n._readRequests.shift();t?a._closeSteps():a._chunkSteps(r)}function Ye(e){return e._reader._readRequests.length}function gt(e){var r=e._reader;return!(r===void 0||!Q(r))}var He=function(){function e(r){if(F(r,1,"ReadableStreamDefaultReader"),Pr(r,"First parameter"),U(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ct(this,r),this._readRequests=new E}return Object.defineProperty(e.prototype,"closed",{get:function(){return Q(this)?this._closedPromise:f(Re("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),Q(this)?this._ownerReadableStream===void 0?f(ie("cancel")):vr(this,r):f(Re("cancel"))},e.prototype.read=function(){if(!Q(this))return f(Re("read"));if(this._ownerReadableStream===void 0)return f(ie("read from"));var r,t,n=g(function(i,o){r=i,t=o}),a={_chunkSteps:function(i){return r({value:i,done:!1})},_closeSteps:function(){return r({value:void 0,done:!0})},_errorSteps:function(i){return t(i)}};return _e(this,a),n},e.prototype.releaseLock=function(){if(!Q(this))throw Re("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");I(this)}},e}();Object.defineProperties(He.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(He.prototype,b.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Q(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof He}function _e(e,r){var t=e._ownerReadableStream;t._disturbed=!0,t._state==="closed"?r._closeSteps():t._state==="errored"?r._errorSteps(t._storedError):t._readableStreamController[wr](r)}function Re(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}var ur,ze;typeof b.asyncIterator=="symbol"&&(ze=(ur={},ur[b.asyncIterator]=function(){return this},ur),Object.defineProperty(ze,b.asyncIterator,{enumerable:!1}));var Rt=function(){function e(r,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=t}return e.prototype.next=function(){var r=this,t=function(){return r._nextSteps()};return this._ongoingPromise=this._ongoingPromise?J(this._ongoingPromise,t,t):t(),this._ongoingPromise},e.prototype.return=function(r){var t=this,n=function(){return t._returnSteps(r)};return this._ongoingPromise?J(this._ongoingPromise,n,n):n()},e.prototype._nextSteps=function(){var r=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var t=this._reader;if(t._ownerReadableStream===void 0)return f(ie("iterate"));var n,a,i=g(function(u,s){n=u,a=s}),o={_chunkSteps:function(u){r._ongoingPromise=void 0,ke(function(){return n({value:u,done:!1})})},_closeSteps:function(){r._ongoingPromise=void 0,r._isFinished=!0,I(t),n({value:void 0,done:!0})},_errorSteps:function(u){r._ongoingPromise=void 0,r._isFinished=!0,I(t),a(u)}};return _e(t,o),i},e.prototype._returnSteps=function(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;var t=this._reader;if(t._ownerReadableStream===void 0)return f(ie("finish iterating"));if(!this._preventCancel){var n=vr(t,r);return I(t),J(n,function(){return{value:r,done:!0}})}return I(t),m({value:r,done:!0})},e}(),wt={next:function(){return Xr(this)?this._asyncIteratorImpl.next():f(Zr("next"))},return:function(e){return Xr(this)?this._asyncIteratorImpl.return(e):f(Zr("return"))}};ze!==void 0&&Object.setPrototypeOf(wt,ze);function vn(e,r){var t=oe(e),n=new Rt(t,r),a=Object.create(wt);return a._asyncIteratorImpl=n,a}function Xr(e){if(!R(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Rt}catch{return!1}}function Zr(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}var Ct=Number.isNaN||function(e){return e!==e};function ce(e){return e.slice()}function Pt(e,r,t,n,a){new Uint8Array(e).set(new Uint8Array(t,n,a),r)}function Ie(e){return!1}function Tt(e,r,t){if(e.slice)return e.slice(r,t);var n=t-r,a=new ArrayBuffer(n);return Pt(a,0,e,r,n),a}function Sn(e){return!(typeof e!="number"||Ct(e)||e<0)}function Jr(e){var r=Tt(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function Er(e){var r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function Wr(e,r,t){if(!Sn(t)||t===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:t}),e._queueTotalSize+=t}function gn(e){var r=e._queue.peek();return r.value}function H(e){e._queue=new E,e._queueTotalSize=0}var Ve=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!lr(this))throw fr("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(r){if(!lr(this))throw fr("respond");if(F(r,1,"respond"),r=vt(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ie(this._view.buffer),Oe(this._associatedReadableByteStreamController,r)},e.prototype.respondWithNewView=function(r){if(!lr(this))throw fr("respondWithNewView");if(F(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ie(r.buffer),je(this._associatedReadableByteStreamController,r)},e}();Object.defineProperties(Ve.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Ve.prototype,b.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var ye=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!X(this))throw fe("byobRequest");return br(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!X(this))throw fe("desiredSize");return kt(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!X(this))throw fe("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be closed");se(this)},e.prototype.enqueue=function(r){if(!X(this))throw fe("enqueue");if(F(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");Be(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!X(this))throw fe("error");P(this,r)},e.prototype[Rr]=function(r){Et(this),H(this);var t=this._cancelAlgorithm(r);return $e(this),t},e.prototype[wr]=function(r){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var n=this._queue.shift();this._queueTotalSize-=n.byteLength,Bt(this);var a=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);r._chunkSteps(a);return}var i=this._autoAllocateChunkSize;if(i!==void 0){var o=void 0;try{o=new ArrayBuffer(i)}catch(s){r._errorSteps(s);return}var u={buffer:o,bufferByteLength:i,byteOffset:0,byteLength:i,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(u)}St(t,r),ee(this)},e}();Object.defineProperties(ye.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(ye.prototype,b.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function X(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof ye}function lr(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Ve}function ee(e){var r=Pn(e);if(r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var t=e._pullAlgorithm();W(t,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ee(e))},function(n){P(e,n)})}}function Et(e){Ar(e),e._pendingPullIntos=new E}function qr(e,r){var t=!1;e._state==="closed"&&(t=!0);var n=Wt(r);r.readerType==="default"?Tr(e,n,t):Wn(e,n,t)}function Wt(e){var r=e.bytesFilled,t=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/t)}function Ae(e,r,t,n){e._queue.push({buffer:r,byteOffset:t,byteLength:n}),e._queueTotalSize+=n}function qt(e,r){var t=r.elementSize,n=r.bytesFilled-r.bytesFilled%t,a=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),i=r.bytesFilled+a,o=i-i%t,u=a,s=!1;o>n&&(u=o-r.bytesFilled,s=!0);for(var d=e._queue;u>0;){var c=d.peek(),h=Math.min(u,c.byteLength),v=r.byteOffset+r.bytesFilled;Pt(r.buffer,v,c.buffer,c.byteOffset,h),c.byteLength===h?d.shift():(c.byteOffset+=h,c.byteLength-=h),e._queueTotalSize-=h,At(e,h,r),u-=h}return s}function At(e,r,t){t.bytesFilled+=r}function Bt(e){e._queueTotalSize===0&&e._closeRequested?($e(e),ge(e._controlledReadableByteStream)):ee(e)}function Ar(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ot(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var r=e._pendingPullIntos.peek();qt(e,r)&&(Ge(e),qr(e._controlledReadableByteStream,r))}}function Rn(e,r,t){var n=e._controlledReadableByteStream,a=1;r.constructor!==DataView&&(a=r.constructor.BYTES_PER_ELEMENT);var i=r.constructor,o=r.buffer,u={buffer:o,bufferByteLength:o.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:a,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(u),Kr(n,t);return}if(n._state==="closed"){var s=new i(u.buffer,u.byteOffset,0);t._closeSteps(s);return}if(e._queueTotalSize>0){if(qt(e,u)){var d=Wt(u);Bt(e),t._chunkSteps(d);return}if(e._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");P(e,c),t._errorSteps(c);return}}e._pendingPullIntos.push(u),Kr(n,t),ee(e)}function wn(e,r){var t=e._controlledReadableByteStream;if(Br(t))for(;Ft(t)>0;){var n=Ge(e);qr(t,n)}}function Cn(e,r,t){if(At(e,r,t),!(t.bytesFilled<t.elementSize)){Ge(e);var n=t.bytesFilled%t.elementSize;if(n>0){var a=t.byteOffset+t.bytesFilled,i=Tt(t.buffer,a-n,a);Ae(e,i,0,i.byteLength)}t.bytesFilled-=n,qr(e._controlledReadableByteStream,t),Ot(e)}}function jt(e,r){var t=e._pendingPullIntos.peek();Ar(e);var n=e._controlledReadableByteStream._state;n==="closed"?wn(e):Cn(e,r,t),ee(e)}function Ge(e){var r=e._pendingPullIntos.shift();return r}function Pn(e){var r=e._controlledReadableByteStream;if(r._state!=="readable"||e._closeRequested||!e._started)return!1;if(gt(r)&&Ye(r)>0||Br(r)&&Ft(r)>0)return!0;var t=kt(e);return t>0}function $e(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function se(e){var r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek();if(t.bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw P(e,n),n}}$e(e),ge(r)}}function Be(e,r){var t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){var n=r.buffer,a=r.byteOffset,i=r.byteLength,o=n;if(e._pendingPullIntos.length>0){var u=e._pendingPullIntos.peek();Ie(u.buffer),u.buffer=u.buffer}if(Ar(e),gt(t))if(Ye(t)===0)Ae(e,o,a,i);else{e._pendingPullIntos.length>0&&Ge(e);var s=new Uint8Array(o,a,i);Tr(t,s,!1)}else Br(t)?(Ae(e,o,a,i),Ot(e)):Ae(e,o,a,i);ee(e)}}function P(e,r){var t=e._controlledReadableByteStream;t._state==="readable"&&(Et(e),H(e),$e(e),tn(t,r))}function br(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var r=e._pendingPullIntos.peek(),t=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),n=Object.create(Ve.prototype);En(n,e,t),e._byobRequest=n}return e._byobRequest}function kt(e){var r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function Oe(e,r){var t=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream._state;if(n==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(t.bytesFilled+r>t.byteLength)throw new RangeError("bytesWritten out of range")}t.buffer=t.buffer,jt(e,r)}function je(e,r){var t=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream._state;if(n==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(t.byteOffset+t.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(t.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(t.bytesFilled+r.byteLength>t.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var a=r.byteLength;t.buffer=r.buffer,jt(e,a)}function zt(e,r,t,n,a,i,o){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,H(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=i,r._pullAlgorithm=n,r._cancelAlgorithm=a,r._autoAllocateChunkSize=o,r._pendingPullIntos=new E,e._readableStreamController=r;var u=t();W(m(u),function(){r._started=!0,ee(r)},function(s){P(r,s)})}function Tn(e,r,t){var n=Object.create(ye.prototype),a=function(){},i=function(){return m(void 0)},o=function(){return m(void 0)};r.start!==void 0&&(a=function(){return r.start(n)}),r.pull!==void 0&&(i=function(){return r.pull(n)}),r.cancel!==void 0&&(o=function(s){return r.cancel(s)});var u=r.autoAllocateChunkSize;if(u===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");zt(e,n,a,i,o,t,u)}function En(e,r,t){e._associatedReadableByteStreamController=r,e._view=t}function fr(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function fe(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function It(e){return new Xe(e)}function Kr(e,r){e._reader._readIntoRequests.push(r)}function Wn(e,r,t){var n=e._reader,a=n._readIntoRequests.shift();t?a._closeSteps(r):a._chunkSteps(r)}function Ft(e){return e._reader._readIntoRequests.length}function Br(e){var r=e._reader;return!(r===void 0||!Z(r))}var Xe=function(){function e(r){if(F(r,1,"ReadableStreamBYOBReader"),Pr(r,"First parameter"),U(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!X(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ct(this,r),this._readIntoRequests=new E}return Object.defineProperty(e.prototype,"closed",{get:function(){return Z(this)?this._closedPromise:f(we("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),Z(this)?this._ownerReadableStream===void 0?f(ie("cancel")):vr(this,r):f(we("cancel"))},e.prototype.read=function(r){if(!Z(this))return f(we("read"));if(!ArrayBuffer.isView(r))return f(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return f(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return f(new TypeError("view's buffer must have non-zero byteLength"));if(Ie(r.buffer),this._ownerReadableStream===void 0)return f(ie("read from"));var t,n,a=g(function(o,u){t=o,n=u}),i={_chunkSteps:function(o){return t({value:o,done:!1})},_closeSteps:function(o){return t({value:o,done:!0})},_errorSteps:function(o){return n(o)}};return Dt(this,r,i),a},e.prototype.releaseLock=function(){if(!Z(this))throw we("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");I(this)}},e}();Object.defineProperties(Xe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,b.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Z(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Xe}function Dt(e,r,t){var n=e._ownerReadableStream;n._disturbed=!0,n._state==="errored"?t._errorSteps(n._storedError):Rn(n._readableStreamController,r,t)}function we(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function be(e,r){var t=e.highWaterMark;if(t===void 0)return r;if(Ct(t)||t<0)throw new RangeError("Invalid highWaterMark");return t}function Fe(e){var r=e.size;return r||function(){return 1}}function De(e,r){D(e,r);var t=e?.highWaterMark,n=e?.size;return{highWaterMark:t===void 0?void 0:Cr(t),size:n===void 0?void 0:qn(n,r+" has member 'size' that")}}function qn(e,r){return q(e,r),function(t){return Cr(e(t))}}function An(e,r){D(e,r);var t=e?.abort,n=e?.close,a=e?.start,i=e?.type,o=e?.write;return{abort:t===void 0?void 0:Bn(t,e,r+" has member 'abort' that"),close:n===void 0?void 0:On(n,e,r+" has member 'close' that"),start:a===void 0?void 0:jn(a,e,r+" has member 'start' that"),write:o===void 0?void 0:kn(o,e,r+" has member 'write' that"),type:i}}function Bn(e,r,t){return q(e,t),function(n){return x(e,r,[n])}}function On(e,r,t){return q(e,t),function(){return x(e,r,[])}}function jn(e,r,t){return q(e,t),function(n){return Ue(e,r,[n])}}function kn(e,r,t){return q(e,t),function(n,a){return x(e,r,[n,a])}}function Lt(e,r){if(!ne(e))throw new TypeError(r+" is not a WritableStream.")}function zn(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}var In=typeof AbortController=="function";function Fn(){if(In)return new AbortController}var Ze=function(){function e(r,t){r===void 0&&(r={}),t===void 0&&(t={}),r===void 0?r=null:_t(r,"First parameter");var n=De(t,"Second parameter"),a=An(r,"First parameter");Nt(this);var i=a.type;if(i!==void 0)throw new RangeError("Invalid type is specified");var o=Fe(n),u=be(n,1);Jn(this,a,u,o)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!ne(this))throw Pe("locked");return ae(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),ne(this)?ae(this)?f(new TypeError("Cannot abort a stream that already has a writer")):Le(this,r):f(Pe("abort"))},e.prototype.close=function(){return ne(this)?ae(this)?f(new TypeError("Cannot close a stream that already has a writer")):j(this)?f(new TypeError("Cannot close an already-closing stream")):Qt(this):f(Pe("close"))},e.prototype.getWriter=function(){if(!ne(this))throw Pe("getWriter");return Mt(this)},e}();Object.defineProperties(Ze.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,b.toStringTag,{value:"WritableStream",configurable:!0});function Mt(e){return new Je(e)}function Dn(e,r,t,n,a,i){a===void 0&&(a=1),i===void 0&&(i=function(){return 1});var o=Object.create(Ze.prototype);Nt(o);var u=Object.create(ve.prototype);return $t(o,u,e,r,t,n,a,i),o}function Nt(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new E,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ne(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Ze}function ae(e){return e._writer!==void 0}function Le(e,r){var t;if(e._state==="closed"||e._state==="errored")return m(void 0);e._writableStreamController._abortReason=r,(t=e._writableStreamController._abortController)===null||t===void 0||t.abort();var n=e._state;if(n==="closed"||n==="errored")return m(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;var a=!1;n==="erroring"&&(a=!0,r=void 0);var i=g(function(o,u){e._pendingAbortRequest={_promise:void 0,_resolve:o,_reject:u,_reason:r,_wasAlreadyErroring:a}});return e._pendingAbortRequest._promise=i,a||jr(e,r),i}function Qt(e){var r=e._state;if(r==="closed"||r==="errored")return f(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));var t=g(function(a,i){var o={_resolve:a,_reject:i};e._closeRequest=o}),n=e._writer;return n!==void 0&&e._backpressure&&r==="writable"&&Lr(n),Kn(e._writableStreamController),t}function Ln(e){var r=g(function(t,n){var a={_resolve:t,_reject:n};e._writeRequests.push(a)});return r}function Or(e,r){var t=e._state;if(t==="writable"){jr(e,r);return}kr(e)}function jr(e,r){var t=e._writableStreamController;e._state="erroring",e._storedError=r;var n=e._writer;n!==void 0&&Yt(n,r),!Yn(e)&&t._started&&kr(e)}function kr(e){e._state="errored",e._writableStreamController[pt]();var r=e._storedError;if(e._writeRequests.forEach(function(a){a._reject(r)}),e._writeRequests=new E,e._pendingAbortRequest===void 0){Ce(e);return}var t=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,t._wasAlreadyErroring){t._reject(r),Ce(e);return}var n=e._writableStreamController[mt](t._reason);W(n,function(){t._resolve(),Ce(e)},function(a){t._reject(a),Ce(e)})}function Mn(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Nn(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,Or(e,r)}function Qn(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var r=e._state;r==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;t!==void 0&&Kt(t)}function Un(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),Or(e,r)}function j(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Yn(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Hn(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Vn(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Ce(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var r=e._writer;r!==void 0&&Dr(r,e._storedError)}function zr(e,r){var t=e._writer;t!==void 0&&r!==e._backpressure&&(r?ia(t):Lr(t)),e._backpressure=r}var Je=function(){function e(r){if(F(r,1,"WritableStreamDefaultWriter"),Lt(r,"First parameter"),ae(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;var t=r._state;if(t==="writable")!j(r)&&r._backpressure?er(this):xr(this),Me(this);else if(t==="erroring")hr(this,r._storedError),Me(this);else if(t==="closed")xr(this),na(this);else{var n=r._storedError;hr(this,n),Jt(this,n)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return V(this)?this._closedPromise:f(G("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!V(this))throw G("desiredSize");if(this._ownerWritableStream===void 0)throw de("desiredSize");return Zn(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return V(this)?this._readyPromise:f(G("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),V(this)?this._ownerWritableStream===void 0?f(de("abort")):Gn(this,r):f(G("abort"))},e.prototype.close=function(){if(!V(this))return f(G("close"));var r=this._ownerWritableStream;return r===void 0?f(de("close")):j(r)?f(new TypeError("Cannot close an already-closing stream")):Ut(this)},e.prototype.releaseLock=function(){if(!V(this))throw G("releaseLock");var r=this._ownerWritableStream;r!==void 0&&Ht(this)},e.prototype.write=function(r){return r===void 0&&(r=void 0),V(this)?this._ownerWritableStream===void 0?f(de("write to")):Vt(this,r):f(G("write"))},e}();Object.defineProperties(Je.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,b.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function V(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Je}function Gn(e,r){var t=e._ownerWritableStream;return Le(t,r)}function Ut(e){var r=e._ownerWritableStream;return Qt(r)}function $n(e){var r=e._ownerWritableStream,t=r._state;return j(r)||t==="closed"?m(void 0):t==="errored"?f(r._storedError):Ut(e)}function Xn(e,r){e._closedPromiseState==="pending"?Dr(e,r):aa(e,r)}function Yt(e,r){e._readyPromiseState==="pending"?xt(e,r):oa(e,r)}function Zn(e){var r=e._ownerWritableStream,t=r._state;return t==="errored"||t==="erroring"?null:t==="closed"?0:Xt(r._writableStreamController)}function Ht(e){var r=e._ownerWritableStream,t=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Yt(e,t),Xn(e,t),r._writer=void 0,e._ownerWritableStream=void 0}function Vt(e,r){var t=e._ownerWritableStream,n=t._writableStreamController,a=xn(n,r);if(t!==e._ownerWritableStream)return f(de("write to"));var i=t._state;if(i==="errored")return f(t._storedError);if(j(t)||i==="closed")return f(new TypeError("The stream is closing or closed and cannot be written to"));if(i==="erroring")return f(t._storedError);var o=Ln(t);return ea(n,r,a),o}var Gt={},ve=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!sr(this))throw dr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!sr(this))throw dr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(r){if(r===void 0&&(r=void 0),!sr(this))throw dr("error");var t=this._controlledWritableStream._state;t==="writable"&&Zt(this,r)},e.prototype[mt]=function(r){var t=this._abortAlgorithm(r);return Ke(this),t},e.prototype[pt]=function(){H(this)},e}();Object.defineProperties(ve.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(ve.prototype,b.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function sr(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof ve}function $t(e,r,t,n,a,i,o,u){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,H(r),r._abortReason=void 0,r._abortController=Fn(),r._started=!1,r._strategySizeAlgorithm=u,r._strategyHWM=o,r._writeAlgorithm=n,r._closeAlgorithm=a,r._abortAlgorithm=i;var s=Fr(r);zr(e,s);var d=t(),c=m(d);W(c,function(){r._started=!0,xe(r)},function(h){r._started=!0,Or(e,h)})}function Jn(e,r,t,n){var a=Object.create(ve.prototype),i=function(){},o=function(){return m(void 0)},u=function(){return m(void 0)},s=function(){return m(void 0)};r.start!==void 0&&(i=function(){return r.start(a)}),r.write!==void 0&&(o=function(d){return r.write(d,a)}),r.close!==void 0&&(u=function(){return r.close()}),r.abort!==void 0&&(s=function(d){return r.abort(d)}),$t(e,a,i,o,u,s,t,n)}function Ke(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Kn(e){Wr(e,Gt,0),xe(e)}function xn(e,r){try{return e._strategySizeAlgorithm(r)}catch(t){return Ir(e,t),1}}function Xt(e){return e._strategyHWM-e._queueTotalSize}function ea(e,r,t){try{Wr(e,r,t)}catch(i){Ir(e,i);return}var n=e._controlledWritableStream;if(!j(n)&&n._state==="writable"){var a=Fr(e);zr(n,a)}xe(e)}function xe(e){var r=e._controlledWritableStream;if(e._started&&r._inFlightWriteRequest===void 0){var t=r._state;if(t==="erroring"){kr(r);return}if(e._queue.length!==0){var n=gn(e);n===Gt?ra(e):ta(e,n)}}}function Ir(e,r){e._controlledWritableStream._state==="writable"&&Zt(e,r)}function ra(e){var r=e._controlledWritableStream;Hn(r),Er(e);var t=e._closeAlgorithm();Ke(e),W(t,function(){Qn(r)},function(n){Un(r,n)})}function ta(e,r){var t=e._controlledWritableStream;Vn(t);var n=e._writeAlgorithm(r);W(n,function(){Mn(t);var a=t._state;if(Er(e),!j(t)&&a==="writable"){var i=Fr(e);zr(t,i)}xe(e)},function(a){t._state==="writable"&&Ke(e),Nn(t,a)})}function Fr(e){var r=Xt(e);return r<=0}function Zt(e,r){var t=e._controlledWritableStream;Ke(e),jr(t,r)}function Pe(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function dr(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function G(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function de(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Me(e){e._closedPromise=g(function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t,e._closedPromiseState="pending"})}function Jt(e,r){Me(e),Dr(e,r)}function na(e){Me(e),Kt(e)}function Dr(e,r){e._closedPromise_reject!==void 0&&(pe(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function aa(e,r){Jt(e,r)}function Kt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function er(e){e._readyPromise=g(function(r,t){e._readyPromise_resolve=r,e._readyPromise_reject=t}),e._readyPromiseState="pending"}function hr(e,r){er(e),xt(e,r)}function xr(e){er(e),Lr(e)}function xt(e,r){e._readyPromise_reject!==void 0&&(pe(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ia(e){er(e)}function oa(e,r){hr(e,r)}function Lr(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}var et=typeof DOMException<"u"?DOMException:void 0;function ua(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function la(){var e=function(t,n){this.message=t||"",this.name=n||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var fa=ua(et)?et:la();function rt(e,r,t,n,a,i){var o=oe(e),u=Mt(r);e._disturbed=!0;var s=!1,d=m(void 0);return g(function(c,h){var v;if(i!==void 0){if(v=function(){var l=new fa("Aborted","AbortError"),p=[];n||p.push(function(){return r._state==="writable"?Le(r,l):m(void 0)}),a||p.push(function(){return e._state==="readable"?T(e,l):m(void 0)}),w(function(){return Promise.all(p.map(function(y){return y()}))},!0,l)},i.aborted){v();return}i.addEventListener("abort",v)}function C(){return g(function(l,p){function y(O){O?l():z(re(),y,p)}y(!1)})}function re(){return s?m(!0):z(u._readyPromise,function(){return g(function(l,p){_e(o,{_chunkSteps:function(y){d=z(Vt(u,y),void 0,pr),l(!1)},_closeSteps:function(){return l(!0)},_errorSteps:p})})})}if(S(e,o._closedPromise,function(l){n?k(!0,l):w(function(){return Le(r,l)},!0,l)}),S(r,u._closedPromise,function(l){a?k(!0,l):w(function(){return T(e,l)},!0,l)}),B(e,o._closedPromise,function(){t?k():w(function(){return $n(u)})}),j(r)||r._state==="closed"){var L=new TypeError("the destination writable stream closed before all data could be piped to it");a?k(!0,L):w(function(){return T(e,L)},!0,L)}pe(C());function A(){var l=d;return z(d,function(){return l!==d?A():void 0})}function S(l,p,y){l._state==="errored"?y(l._storedError):yr(p,y)}function B(l,p,y){l._state==="closed"?y():or(p,y)}function w(l,p,y){if(s)return;s=!0,r._state==="writable"&&!j(r)?or(A(),O):O();function O(){W(l(),function(){return _(p,y)},function(M){return _(!0,M)})}}function k(l,p){s||(s=!0,r._state==="writable"&&!j(r)?or(A(),function(){return _(l,p)}):_(l,p))}function _(l,p){Ht(u),I(o),i!==void 0&&i.removeEventListener("abort",v),l?h(p):c(void 0)}})}var Se=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Te(this))throw Ee("desiredSize");return Mr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Te(this))throw Ee("close");if(!ue(this))throw new TypeError("The stream is not in a state that permits close");me(this)},e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!Te(this))throw Ee("enqueue");if(!ue(this))throw new TypeError("The stream is not in a state that permits enqueue");return Qe(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Te(this))throw Ee("error");Y(this,r)},e.prototype[Rr]=function(r){H(this);var t=this._cancelAlgorithm(r);return Ne(this),t},e.prototype[wr]=function(r){var t=this._controlledReadableStream;if(this._queue.length>0){var n=Er(this);this._closeRequested&&this._queue.length===0?(Ne(this),ge(t)):he(this),r._chunkSteps(n)}else St(t,r),he(this)},e}();Object.defineProperties(Se.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Se.prototype,b.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Te(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Se}function he(e){var r=en(e);if(r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var t=e._pullAlgorithm();W(t,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,he(e))},function(n){Y(e,n)})}}function en(e){var r=e._controlledReadableStream;if(!ue(e)||!e._started)return!1;if(U(r)&&Ye(r)>0)return!0;var t=Mr(e);return t>0}function Ne(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function me(e){if(ue(e)){var r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Ne(e),ge(r))}}function Qe(e,r){if(ue(e)){var t=e._controlledReadableStream;if(U(t)&&Ye(t)>0)Tr(t,r,!1);else{var n=void 0;try{n=e._strategySizeAlgorithm(r)}catch(a){throw Y(e,a),a}try{Wr(e,r,n)}catch(a){throw Y(e,a),a}}he(e)}}function Y(e,r){var t=e._controlledReadableStream;t._state==="readable"&&(H(e),Ne(e),tn(t,r))}function Mr(e){var r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function sa(e){return!en(e)}function ue(e){var r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function rn(e,r,t,n,a,i,o){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,H(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=o,r._strategyHWM=i,r._pullAlgorithm=n,r._cancelAlgorithm=a,e._readableStreamController=r;var u=t();W(m(u),function(){r._started=!0,he(r)},function(s){Y(r,s)})}function da(e,r,t,n){var a=Object.create(Se.prototype),i=function(){},o=function(){return m(void 0)},u=function(){return m(void 0)};r.start!==void 0&&(i=function(){return r.start(a)}),r.pull!==void 0&&(o=function(){return r.pull(a)}),r.cancel!==void 0&&(u=function(s){return r.cancel(s)}),rn(e,a,i,o,u,t,n)}function Ee(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function ca(e,r){return X(e._readableStreamController)?ha(e):ba(e)}function ba(e,r){var t=oe(e),n=!1,a=!1,i=!1,o=!1,u,s,d,c,h,v=g(function(S){h=S});function C(){if(n)return a=!0,m(void 0);n=!0;var S={_chunkSteps:function(B){ke(function(){a=!1;var w=B,k=B;i||Qe(d._readableStreamController,w),o||Qe(c._readableStreamController,k),n=!1,a&&C()})},_closeSteps:function(){n=!1,i||me(d._readableStreamController),o||me(c._readableStreamController),(!i||!o)&&h(void 0)},_errorSteps:function(){n=!1}};return _e(t,S),m(void 0)}function re(S){if(i=!0,u=S,o){var B=ce([u,s]),w=T(e,B);h(w)}return v}function L(S){if(o=!0,s=S,i){var B=ce([u,s]),w=T(e,B);h(w)}return v}function A(){}return d=mr(A,C,re),c=mr(A,C,L),yr(t._closedPromise,function(S){Y(d._readableStreamController,S),Y(c._readableStreamController,S),(!i||!o)&&h(void 0)}),[d,c]}function ha(e){var r=oe(e),t=!1,n=!1,a=!1,i=!1,o=!1,u,s,d,c,h,v=g(function(_){h=_});function C(_){yr(_._closedPromise,function(l){_===r&&(P(d._readableStreamController,l),P(c._readableStreamController,l),(!i||!o)&&h(void 0))})}function re(){Z(r)&&(I(r),r=oe(e),C(r));var _={_chunkSteps:function(l){ke(function(){n=!1,a=!1;var p=l,y=l;if(!i&&!o)try{y=Jr(l)}catch(O){P(d._readableStreamController,O),P(c._readableStreamController,O),h(T(e,O));return}i||Be(d._readableStreamController,p),o||Be(c._readableStreamController,y),t=!1,n?A():a&&S()})},_closeSteps:function(){t=!1,i||se(d._readableStreamController),o||se(c._readableStreamController),d._readableStreamController._pendingPullIntos.length>0&&Oe(d._readableStreamController,0),c._readableStreamController._pendingPullIntos.length>0&&Oe(c._readableStreamController,0),(!i||!o)&&h(void 0)},_errorSteps:function(){t=!1}};_e(r,_)}function L(_,l){Q(r)&&(I(r),r=It(e),C(r));var p=l?c:d,y=l?d:c,O={_chunkSteps:function(M){ke(function(){n=!1,a=!1;var te=l?o:i,le=l?i:o;if(le)te||je(p._readableStreamController,M);else{var Hr=void 0;try{Hr=Jr(M)}catch(ir){P(p._readableStreamController,ir),P(y._readableStreamController,ir),h(T(e,ir));return}te||je(p._readableStreamController,M),Be(y._readableStreamController,Hr)}t=!1,n?A():a&&S()})},_closeSteps:function(M){t=!1;var te=l?o:i,le=l?i:o;te||se(p._readableStreamController),le||se(y._readableStreamController),M!==void 0&&(te||je(p._readableStreamController,M),!le&&y._readableStreamController._pendingPullIntos.length>0&&Oe(y._readableStreamController,0)),(!te||!le)&&h(void 0)},_errorSteps:function(){t=!1}};Dt(r,_,O)}function A(){if(t)return n=!0,m(void 0);t=!0;var _=br(d._readableStreamController);return _===null?re():L(_._view,!1),m(void 0)}function S(){if(t)return a=!0,m(void 0);t=!0;var _=br(c._readableStreamController);return _===null?re():L(_._view,!0),m(void 0)}function B(_){if(i=!0,u=_,o){var l=ce([u,s]),p=T(e,l);h(p)}return v}function w(_){if(o=!0,s=_,i){var l=ce([u,s]),p=T(e,l);h(p)}return v}function k(){}return d=nt(k,A,B),c=nt(k,S,w),C(r),[d,c]}function ma(e,r){D(e,r);var t=e,n=t?.autoAllocateChunkSize,a=t?.cancel,i=t?.pull,o=t?.start,u=t?.type;return{autoAllocateChunkSize:n===void 0?void 0:vt(n,r+" has member 'autoAllocateChunkSize' that"),cancel:a===void 0?void 0:pa(a,t,r+" has member 'cancel' that"),pull:i===void 0?void 0:_a(i,t,r+" has member 'pull' that"),start:o===void 0?void 0:ya(o,t,r+" has member 'start' that"),type:u===void 0?void 0:va(u,r+" has member 'type' that")}}function pa(e,r,t){return q(e,t),function(n){return x(e,r,[n])}}function _a(e,r,t){return q(e,t),function(n){return x(e,r,[n])}}function ya(e,r,t){return q(e,t),function(n){return Ue(e,r,[n])}}function va(e,r){if(e=""+e,e!=="bytes")throw new TypeError(r+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function Sa(e,r){D(e,r);var t=e?.mode;return{mode:t===void 0?void 0:ga(t,r+" has member 'mode' that")}}function ga(e,r){if(e=""+e,e!=="byob")throw new TypeError(r+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function Ra(e,r){D(e,r);var t=e?.preventCancel;return{preventCancel:!!t}}function tt(e,r){D(e,r);var t=e?.preventAbort,n=e?.preventCancel,a=e?.preventClose,i=e?.signal;return i!==void 0&&wa(i,r+" has member 'signal' that"),{preventAbort:!!t,preventCancel:!!n,preventClose:!!a,signal:i}}function wa(e,r){if(!zn(e))throw new TypeError(r+" is not an AbortSignal.")}function Ca(e,r){D(e,r);var t=e?.readable;cr(t,"readable","ReadableWritablePair"),Pr(t,r+" has member 'readable' that");var n=e?.writable;return cr(n,"writable","ReadableWritablePair"),Lt(n,r+" has member 'writable' that"),{readable:t,writable:n}}var K=function(){function e(r,t){r===void 0&&(r={}),t===void 0&&(t={}),r===void 0?r=null:_t(r,"First parameter");var n=De(t,"Second parameter"),a=ma(r,"First parameter");if(Nr(this),a.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var i=be(n,0);Tn(this,a,i)}else{var o=Fe(n),i=be(n,1);da(this,a,i,o)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!N(this))throw $("locked");return U(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),N(this)?U(this)?f(new TypeError("Cannot cancel a stream that already has a reader")):T(this,r):f($("cancel"))},e.prototype.getReader=function(r){if(r===void 0&&(r=void 0),!N(this))throw $("getReader");var t=Sa(r,"First parameter");return t.mode===void 0?oe(this):It(this)},e.prototype.pipeThrough=function(r,t){if(t===void 0&&(t={}),!N(this))throw $("pipeThrough");F(r,1,"pipeThrough");var n=Ca(r,"First parameter"),a=tt(t,"Second parameter");if(U(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ae(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var i=rt(this,n.writable,a.preventClose,a.preventAbort,a.preventCancel,a.signal);return pe(i),n.readable},e.prototype.pipeTo=function(r,t){if(t===void 0&&(t={}),!N(this))return f($("pipeTo"));if(r===void 0)return f("Parameter 1 is required in 'pipeTo'.");if(!ne(r))return f(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var n;try{n=tt(t,"Second parameter")}catch(a){return f(a)}return U(this)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ae(r)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):rt(this,r,n.preventClose,n.preventAbort,n.preventCancel,n.signal)},e.prototype.tee=function(){if(!N(this))throw $("tee");var r=ca(this);return ce(r)},e.prototype.values=function(r){if(r===void 0&&(r=void 0),!N(this))throw $("values");var t=Ra(r,"First parameter");return vn(this,t.preventCancel)},e}();Object.defineProperties(K.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(K.prototype,b.toStringTag,{value:"ReadableStream",configurable:!0});typeof b.asyncIterator=="symbol"&&Object.defineProperty(K.prototype,b.asyncIterator,{value:K.prototype.values,writable:!0,configurable:!0});function mr(e,r,t,n,a){n===void 0&&(n=1),a===void 0&&(a=function(){return 1});var i=Object.create(K.prototype);Nr(i);var o=Object.create(Se.prototype);return rn(i,o,e,r,t,n,a),i}function nt(e,r,t){var n=Object.create(K.prototype);Nr(n);var a=Object.create(ye.prototype);return zt(n,a,e,r,t,0,void 0),n}function Nr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function N(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof K}function U(e){return e._reader!==void 0}function T(e,r){if(e._disturbed=!0,e._state==="closed")return m(void 0);if(e._state==="errored")return f(e._storedError);ge(e);var t=e._reader;t!==void 0&&Z(t)&&(t._readIntoRequests.forEach(function(a){a._closeSteps(void 0)}),t._readIntoRequests=new E);var n=e._readableStreamController[Rr](r);return J(n,pr)}function ge(e){e._state="closed";var r=e._reader;r!==void 0&&(ht(r),Q(r)&&(r._readRequests.forEach(function(t){t._closeSteps()}),r._readRequests=new E))}function tn(e,r){e._state="errored",e._storedError=r;var t=e._reader;t!==void 0&&(gr(t,r),Q(t)?(t._readRequests.forEach(function(n){n._errorSteps(r)}),t._readRequests=new E):(t._readIntoRequests.forEach(function(n){n._errorSteps(r)}),t._readIntoRequests=new E))}function $(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function nn(e,r){D(e,r);var t=e?.highWaterMark;return cr(t,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Cr(t)}}var an=function(e){return e.byteLength};try{Object.defineProperty(an,"name",{value:"size",configurable:!0})}catch{}var Qr=function(){function e(r){F(r,1,"ByteLengthQueuingStrategy"),r=nn(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!it(this))throw at("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!it(this))throw at("size");return an},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Qr.prototype,b.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function at(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function it(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Qr}var on=function(){return 1};try{Object.defineProperty(on,"name",{value:"size",configurable:!0})}catch{}var Ur=function(){function e(r){F(r,1,"CountQueuingStrategy"),r=nn(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!ut(this))throw ot("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!ut(this))throw ot("size");return on},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Ur.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Ur.prototype,b.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ot(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function ut(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Ur}function Pa(e,r){D(e,r);var t=e?.flush,n=e?.readableType,a=e?.start,i=e?.transform,o=e?.writableType;return{flush:t===void 0?void 0:Ta(t,e,r+" has member 'flush' that"),readableType:n,start:a===void 0?void 0:Ea(a,e,r+" has member 'start' that"),transform:i===void 0?void 0:Wa(i,e,r+" has member 'transform' that"),writableType:o}}function Ta(e,r,t){return q(e,t),function(n){return x(e,r,[n])}}function Ea(e,r,t){return q(e,t),function(n){return Ue(e,r,[n])}}function Wa(e,r,t){return q(e,t),function(n,a){return x(e,r,[n,a])}}var Yr=function(){function e(r,t,n){r===void 0&&(r={}),t===void 0&&(t={}),n===void 0&&(n={}),r===void 0&&(r=null);var a=De(t,"Second parameter"),i=De(n,"Third parameter"),o=Pa(r,"First parameter");if(o.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(o.writableType!==void 0)throw new RangeError("Invalid writableType specified");var u=be(i,0),s=Fe(i),d=be(a,1),c=Fe(a),h,v=g(function(C){h=C});qa(this,v,d,c,u,s),Ba(this,o),o.start!==void 0?h(o.start(this._transformStreamController)):h(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!lt(this))throw st("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!lt(this))throw st("writable");return this._writable},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Yr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(Yr.prototype,b.toStringTag,{value:"TransformStream",configurable:!0});function qa(e,r,t,n,a,i){function o(){return r}function u(v){return ka(e,v)}function s(v){return za(e,v)}function d(){return Ia(e)}e._writable=Dn(o,u,d,s,t,n);function c(){return Fa(e)}function h(v){return tr(e,v),m(void 0)}e._readable=mr(o,c,h,a,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,nr(e,!0),e._transformStreamController=void 0}function lt(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Yr}function rr(e,r){Y(e._readable._readableStreamController,r),tr(e,r)}function tr(e,r){un(e._transformStreamController),Ir(e._writable._writableStreamController,r),e._backpressure&&nr(e,!1)}function nr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=g(function(t){e._backpressureChangePromise_resolve=t}),e._backpressure=r}var ar=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!We(this))throw qe("desiredSize");var r=this._controlledTransformStream._readable._readableStreamController;return Mr(r)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!We(this))throw qe("enqueue");ln(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!We(this))throw qe("error");Oa(this,r)},e.prototype.terminate=function(){if(!We(this))throw qe("terminate");ja(this)},e}();Object.defineProperties(ar.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}});typeof b.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,b.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function We(e){return!R(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof ar}function Aa(e,r,t,n){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=t,r._flushAlgorithm=n}function Ba(e,r){var t=Object.create(ar.prototype),n=function(i){try{return ln(t,i),m(void 0)}catch(o){return f(o)}},a=function(){return m(void 0)};r.transform!==void 0&&(n=function(i){return r.transform(i,t)}),r.flush!==void 0&&(a=function(){return r.flush(t)}),Aa(e,t,n,a)}function un(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ln(e,r){var t=e._controlledTransformStream,n=t._readable._readableStreamController;if(!ue(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{Qe(n,r)}catch(i){throw tr(t,i),t._readable._storedError}var a=sa(n);a!==t._backpressure&&nr(t,!0)}function Oa(e,r){rr(e._controlledTransformStream,r)}function ft(e,r){var t=e._transformAlgorithm(r);return J(t,void 0,function(n){throw rr(e._controlledTransformStream,n),n})}function ja(e){var r=e._controlledTransformStream,t=r._readable._readableStreamController;me(t);var n=new TypeError("TransformStream terminated");tr(r,n)}function ka(e,r){var t=e._transformStreamController;if(e._backpressure){var n=e._backpressureChangePromise;return J(n,function(){var a=e._writable,i=a._state;if(i==="erroring")throw a._storedError;return ft(t,r)})}return ft(t,r)}function za(e,r){return rr(e,r),m(void 0)}function Ia(e){var r=e._readable,t=e._transformStreamController,n=t._flushAlgorithm();return un(t),J(n,function(){if(r._state==="errored")throw r._storedError;me(r._readableStreamController)},function(a){throw rr(e,a),r._storedError})}function Fa(e){return nr(e,!1),e._backpressureChangePromise}function qe(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function st(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}export{Qr as ByteLengthQueuingStrategy,Ur as CountQueuingStrategy,ye as ReadableByteStreamController,K as ReadableStream,Xe as ReadableStreamBYOBReader,Ve as ReadableStreamBYOBRequest,Se as ReadableStreamDefaultController,He as ReadableStreamDefaultReader,Yr as TransformStream,ar as TransformStreamDefaultController,Ze as WritableStream,ve as WritableStreamDefaultController,Je as WritableStreamDefaultWriter};
//# sourceMappingURL=ponyfill.js.map