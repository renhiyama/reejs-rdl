/* esm.sh - esbuild bundle(@remix-run/web-blob@3.0.4) node production */
import{TextEncoder as h,TextDecoder as b}from"./e28040.js";import{ReadableStream as p}from"./e1b0bc.js";var _=class w{constructor(e=[],n={}){let t=[],s=0;for(let r of e)if(typeof r=="string"){let o=new h().encode(r);t.push(o),s+=o.byteLength}else if(r instanceof _)s+=r.size,t.push(...r._parts);else if(r instanceof ArrayBuffer)t.push(new Uint8Array(r)),s+=r.byteLength;else if(r instanceof Uint8Array)t.push(r),s+=r.byteLength;else if(ArrayBuffer.isView(r)){let{buffer:o,byteOffset:i,byteLength:a}=r;t.push(new Uint8Array(o,i,a)),s+=a}else{let o=new h().encode(String(r));t.push(o),s+=o.byteLength}this._size=s,this._type=z(n.type),this._parts=t,Object.defineProperties(this,{_size:{enumerable:!1},_type:{enumerable:!1},_parts:{enumerable:!1}})}get type(){return this._type}get size(){return this._size}slice(e=0,n=this.size,t=""){let{size:s,_parts:r}=this,o=e<0?Math.max(s+e,0):Math.min(e,s),i=n<0?Math.max(s+n,0):Math.min(n,s),a=Math.max(i-o,0),c=new w([],{type:t});if(a===0)return c;let u=0,g=[];for(let m of r){let{byteLength:l}=m;if(o>0&&l<=o)o-=l,i-=l;else{let x=m.subarray(o,Math.min(l,i));if(g.push(x),u+=x.byteLength,o=0,u>=a)break}}return c._parts=g,c._size=u,c}async arrayBuffer(){let e=new ArrayBuffer(this.size),n=new Uint8Array(e),t=0;for(let s of this._parts)n.set(s,t),t+=s.byteLength;return e}async text(){let e=new b,n="";for(let t of this._parts)n+=e.decode(t);return n}stream(){return new y(this._parts)}toString(){return"[object Blob]"}get[Symbol.toStringTag](){return"Blob"}},k=_,y=class extends p{constructor(e){super(new d(e.values()),{type:"bytes"}),this._chunks=e}async*[Symbol.asyncIterator](e){let n=this.getReader();yield*this._chunks,n.releaseLock()}},d=class{constructor(e){this.chunks=e}start(e){this.work(e),this.isWorking=!1,this.isCancelled=!1}async work(e){let{chunks:n}=this;for(this.isWorking=!0;!this.isCancelled&&(e.desiredSize||0)>0;){let t=null;try{t=n.next()}catch(s){e.error(s);break}t&&(!t.done&&!this.isCancelled?e.enqueue(t.value):e.close())}this.isWorking=!1}pull(e){this.isWorking||this.work(e)}cancel(){this.isCancelled=!0}},z=(f="")=>{let e=String(f).toLowerCase();return/[^\u0020-\u007E]/.test(e)?"":e};var W=globalThis.Blob||k;export{W as Blob,p as ReadableStream,b as TextDecoder,h as TextEncoder};
//# sourceMappingURL=web-blob.mjs.map