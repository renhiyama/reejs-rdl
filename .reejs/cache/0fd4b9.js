/* esm.sh - esbuild bundle(@hono/node-server@0.3.0) deno production */
import  { Buffer as __Buffer$ } from "./36b370.js";var __global$ = globalThis || (typeof window !== "undefined" ? window : self);import * as __1$ from "./cb0622.js";import * as __2$ from "./6b1434.js";import __3$ from "./b8ffcb.js";import __4$ from "./59af56.js";import * as __5$ from "./f5b67d.js";var I=Object.create;var g=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var Q=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var f=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),V=(e,t)=>{for(var r in t)g(e,r,{get:t[r],enumerable:!0})},S=(e,t,r,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of K(t))!U.call(e,o)&&o!==r&&g(e,o,{get:()=>t[o],enumerable:!(l=J(t,o))||l.enumerable});return e},c=(e,t,r)=>(S(e,t,"default"),r&&S(r,t,"default")),M=(e,t,r)=>(r=e!=null?I(Q(e)):{},S(t||!e||!e.__esModule?g(r,"default",{value:e,enumerable:!0}):r,e));var D=d(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.btoa=_.atob=void 0;function X(e){return __Buffer$.from(e,"base64").toString("binary")}_.atob=X;function Y(e){return __Buffer$.from(e,"binary").toString("base64")}_.btoa=Y});var O=d(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.fetch=a.Response=a.Request=a.Headers=a.Blob=a.File=a.FormData=void 0;var q=__2$;Object.defineProperty(a,"Headers",{enumerable:!0,get:function(){return q.Headers}});var Z=__2$;Object.defineProperty(a,"FormData",{enumerable:!0,get:function(){return Z.FormData}});var W=__1$;Object.defineProperty(a,"File",{enumerable:!0,get:function(){return W.File}});Object.defineProperty(a,"Blob",{enumerable:!0,get:function(){return W.Blob}});var y=class extends q.Request{constructor(t,r){super(t,r)}get headers(){return super.headers}clone(){return new y(this)}};a.Request=y;var j=class extends q.Response{get headers(){return super.headers}clone(){return super.clone()}};a.Response=j;var N=(e,t)=>(t={compress:!1,...t},(0,q.fetch)(e,t));a.fetch=N});var T=d(p=>{"use strict";var ee=p&&p.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(p,"__esModule",{value:!0});p.installGlobals=void 0;var te=ee(__3$),x=__5$,B=D(),i=O();function re(){__global$.atob=B.atob,__global$.btoa=B.btoa,__global$.Blob=i.Blob,__global$.File=i.File,__global$.Headers=i.Headers,__global$.Request=i.Request,__global$.Response=i.Response,__global$.fetch=i.fetch,__global$.FormData=i.FormData,__global$.ReadableStream=x.ReadableStream,__global$.WritableStream=x.WritableStream,typeof __global$.crypto>"u"&&(__global$.crypto=te.default)}p.installGlobals=re});var G=d(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.writeReadableStreamToWritable=void 0;async function ae(e,t){let r=e.getReader();async function l(){let{done:o,value:m}=await r.read();if(o){t.end();return}t.write(m),await l()}try{await l()}catch(o){throw t.destroy(o),o}}w.writeReadableStreamToWritable=ae});var k=d(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.getRequestListener=void 0;var se=O(),oe=G(),ne=e=>async(t,r)=>{let l=t.method||"GET",o=`http://${t.headers.host}${t.url}`,m={},z=t.rawHeaders.length;for(let s=0;s<z;s++)if(s%2===0){let h=t.rawHeaders[s];m[h]=t.rawHeaders[s+1]}let H={method:l,headers:m};l==="GET"||l==="HEAD"||(H.body=new ReadableStream({start:async s=>{for await(let h of t)s.enqueue(h);s.close()}}));let n;try{n=await e(new Request(o.toString(),H))}catch{n=new se.Response(null,{status:500})}let A=n.headers.get("content-type")||"",F=n.headers.get("content-encoding");for(let[s,h]of n.headers)s==="set-cookie"?r.setHeader(s,n.headers.getAll(s)):r.setHeader(s,h);r.statusCode=n.status,n.body?!F&&A.startsWith("text")?r.end(await n.text()):!F&&A.startsWith("application/json")?r.end(await n.text()):await(0,oe.writeReadableStreamToWritable)(n.body,r):r.end()};R.getRequestListener=ne});var L=d(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.serve=b.createAdaptorServer=void 0;var le=__4$,ue=T(),ce=k();(0,ue.installGlobals)();var de=e=>{let t=e.fetch,r=(0,ce.getRequestListener)(t);return(0,le.createServer)(e.serverOptions||{},r)};b.createAdaptorServer=de;var ie=e=>{let t=(0,b.createAdaptorServer)(e);return t.listen(e.port||3e3,e.hostname||"0.0.0.0"),t};b.serve=ie});var P=d(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.createAdaptorServer=v.serve=void 0;var E=L();Object.defineProperty(v,"serve",{enumerable:!0,get:function(){return E.serve}});Object.defineProperty(v,"createAdaptorServer",{enumerable:!0,get:function(){return E.createAdaptorServer}})});var u={};V(u,{__esModule:()=>be,createAdaptorServer:()=>fe,default:()=>ve,serve:()=>_e});var $=M(P());c(u,M(P()));var be=!0,{createAdaptorServer:fe,serve:_e}=$,{default:C,...pe}=$,ve=C!==void 0?C:pe;export{be as __esModule,fe as createAdaptorServer,ve as default,_e as serve};
//# sourceMappingURL=node-server.bundle.mjs.map