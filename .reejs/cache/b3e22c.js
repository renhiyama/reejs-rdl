var p=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(o,i)=>(typeof require<"u"?require:o)[i]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});import*as S from"./9bbad0.js";var g=S.default??S,G=Object.create,N=Object.defineProperty,b=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,w=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,Q=(t=>typeof p<"u"?p:typeof Proxy<"u"?new Proxy(t,{get:(o,i)=>(typeof p<"u"?p:o)[i]}):t)(function(t){if(typeof p<"u")return p.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),C=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports),B=(t,o)=>{for(var i in o)N(t,i,{get:o[i],enumerable:!0})},A=(t,o,i,u)=>{if(o&&typeof o=="object"||typeof o=="function")for(let y of m(o))!h.call(t,y)&&y!==i&&N(t,y,{get:()=>o[y],enumerable:!(u=b(o,y))||u.enumerable});return t},x=(t,o,i)=>(A(t,o,"default"),i&&A(i,o,"default")),R=(t,o,i)=>(i=t!=null?G(w(t)):{},A(o||!t||!t.__esModule?N(i,"default",{value:t,enumerable:!0}):i,t)),H=C(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextStyleTypes=t.ButtonStyleTypes=t.MessageComponentTypes=void 0;var o;(function(n){n[n.ACTION_ROW=1]="ACTION_ROW",n[n.BUTTON=2]="BUTTON",n[n.STRING_SELECT=3]="STRING_SELECT",n[n.INPUT_TEXT=4]="INPUT_TEXT",n[n.USER_SELECT=5]="USER_SELECT",n[n.ROLE_SELECT=6]="ROLE_SELECT",n[n.MENTIONABLE_SELECT=7]="MENTIONABLE_SELECT",n[n.CHANNEL_SELECT=8]="CHANNEL_SELECT"})(o||(o={})),t.MessageComponentTypes=o;var i;(function(n){n[n.PRIMARY=1]="PRIMARY",n[n.SECONDARY=2]="SECONDARY",n[n.SUCCESS=3]="SUCCESS",n[n.DANGER=4]="DANGER",n[n.LINK=5]="LINK"})(i||(i={})),t.ButtonStyleTypes=i;var u;(function(n){n[n.DM=1]="DM",n[n.GROUP_DM=3]="GROUP_DM",n[n.GUILD_TEXT=0]="GUILD_TEXT",n[n.GUILD_VOICE=2]="GUILD_VOICE",n[n.GUILD_CATEGORY=4]="GUILD_CATEGORY",n[n.GUILD_ANNOUNCEMENT=5]="GUILD_ANNOUNCEMENT",n[n.GUILD_STORE=6]="GUILD_STORE"})(u||(u={}));var y;(function(n){n[n.SHORT=1]="SHORT",n[n.PARAGRAPH=2]="PARAGRAPH"})(y||(y={})),t.TextStyleTypes=y}),P=C(t=>{"use strict";var o=t&&t.__createBinding||(Object.create?function(e,r,a,s){s===void 0&&(s=a),Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[a]}})}:function(e,r,a,s){s===void 0&&(s=a),e[s]=r[a]}),i=t&&t.__exportStar||function(e,r){for(var a in e)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&o(r,e,a)},u=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyKeyMiddleware=t.verifyKey=t.InteractionResponseFlags=t.InteractionResponseType=t.InteractionType=void 0;var y=u(g),n;(function(e){e[e.PING=1]="PING",e[e.APPLICATION_COMMAND=2]="APPLICATION_COMMAND",e[e.MESSAGE_COMPONENT=3]="MESSAGE_COMPONENT",e[e.APPLICATION_COMMAND_AUTOCOMPLETE=4]="APPLICATION_COMMAND_AUTOCOMPLETE",e[e.MODAL_SUBMIT=5]="MODAL_SUBMIT"})(n||(n={})),t.InteractionType=n;var c;(function(e){e[e.PONG=1]="PONG",e[e.CHANNEL_MESSAGE_WITH_SOURCE=4]="CHANNEL_MESSAGE_WITH_SOURCE",e[e.DEFERRED_CHANNEL_MESSAGE_WITH_SOURCE=5]="DEFERRED_CHANNEL_MESSAGE_WITH_SOURCE",e[e.DEFERRED_UPDATE_MESSAGE=6]="DEFERRED_UPDATE_MESSAGE",e[e.UPDATE_MESSAGE=7]="UPDATE_MESSAGE",e[e.APPLICATION_COMMAND_AUTOCOMPLETE_RESULT=8]="APPLICATION_COMMAND_AUTOCOMPLETE_RESULT",e[e.MODAL=9]="MODAL"})(c||(c={})),t.InteractionResponseType=c;var O;(function(e){e[e.EPHEMERAL=64]="EPHEMERAL"})(O||(O={})),t.InteractionResponseFlags=O;function l(e,r){if(e==null)return new Uint8Array;if(typeof e=="string")if(r==="hex"){let a=e.match(/.{1,2}/g);if(a==null)throw new Error("Value is not a valid hex string");let s=a.map(E=>parseInt(E,16));return new Uint8Array(s)}else return new TextEncoder().encode(e);try{if(Buffer.isBuffer(e))return new Uint8Array(e)}catch{}if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;throw new Error("Unrecognized value type, must be one of: string, Buffer, ArrayBuffer, Uint8Array")}function U(e,r){let a=new Uint8Array(e.length+r.length);return a.set(e),a.set(r,e.length),a}function I(e,r,a,s){try{let E=l(a),d=l(e),_=U(E,d),T=l(r,"hex"),f=l(s,"hex");return y.default.sign.detached.verify(_,T,f)}catch(E){return console.error("[discord-interactions]: Invalid verifyKey parameters",E),!1}}t.verifyKey=I;function D(e){if(!e)throw new Error("You must specify a Discord client public key");return function(r,a,s){let E=r.header("X-Signature-Timestamp")||"",d=r.header("X-Signature-Ed25519")||"";function _(T){if(!I(T,d,E,e)){a.statusCode=401,a.end("[discord-interactions] Invalid signature");return}let f=JSON.parse(T.toString("utf-8"))||{};if(f.type===n.PING){a.setHeader("Content-Type","application/json"),a.end(JSON.stringify({type:c.PONG}));return}r.body=f,s()}if(r.body)Buffer.isBuffer(r.body)?_(r.body):typeof r.body=="string"?_(Buffer.from(r.body,"utf-8")):(console.warn("[discord-interactions]: req.body was tampered with, probably by some other middleware. We recommend disabling middleware for interaction routes so that req.body is a raw buffer."),_(Buffer.from(JSON.stringify(r.body),"utf-8")));else{let T=[];r.on("data",f=>{T.push(f)}),r.on("end",()=>{let f=Buffer.concat(T);_(f)})}}}t.verifyKeyMiddleware=D,i(H(),t)}),L={};B(L,{ButtonStyleTypes:()=>J,InteractionResponseFlags:()=>F,InteractionResponseType:()=>W,InteractionType:()=>Y,MessageComponentTypes:()=>V,TextStyleTypes:()=>X,__esModule:()=>j,default:()=>k,verifyKey:()=>q,verifyKeyMiddleware:()=>K});var v=R(P());x(L,R(P()));var j=!0,{verifyKeyMiddleware:K,verifyKey:q,InteractionResponseFlags:F,InteractionResponseType:W,InteractionType:Y,TextStyleTypes:X,ButtonStyleTypes:J,MessageComponentTypes:V}=v,{default:M,...$}=v,k=M!==void 0?M:$;export{J as ButtonStyleTypes,F as InteractionResponseFlags,W as InteractionResponseType,Y as InteractionType,V as MessageComponentTypes,X as TextStyleTypes,j as __esModule,k as default,q as verifyKey,K as verifyKeyMiddleware};
//# sourceMappingURL=discord-interactions.bundle.mjs.map